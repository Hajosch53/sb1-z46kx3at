(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();function l(d,n){return d.toLowerCase().replace(/[^a-zäöüß\s]/gi," ").split(/\s+/).filter(r=>r.length>1&&!n.has(r.toLowerCase()))}const u=new Set(["aber","als","am","an","auch","auf","aus","bei","bin","bis","bist","da","dadurch","daher","darum","das","daß","dass","dein","deine","dem","den","der","des","dessen","deshalb","die","dies","dieser","dieses","doch","dort","du","durch","ein","eine","einem","einen","einer","eines","er","es","euer","eure","für","hatte","hatten","hattest","hattet","hier","hinter","ich","ihr","ihre","im","in","ist","ja","jede","jedem","jeden","jeder","jedes","jener","jenes","jetzt","kann","kannst","können","könnt","machen","mein","meine","mit","muß","mußt","musst","müssen","müßt","nach","nachdem","nein","nicht","nun","oder","seid","sein","seine","sich","sie","sind","soll","sollen","sollst","sollt","sonst","soweit","sowie","und","unser","unsere","unter","vom","von","vor","wann","warum","was","weiter","weitere","wenn","wer","werde","werden","werdet","weshalb","wie","wieder","wieso","wir","wird","wirst","wo","woher","wohin","zu","zum","zur","über"]);async function m(d,n=3){try{const r=l(d,u),s={};return r.forEach(e=>{s[e]=(s[e]||0)+1}),Object.fromEntries(Object.entries(s).filter(([e,t])=>t>=n))}catch(r){throw new Error(`Fehler bei der Index-Generierung: ${r.message}`)}}document.getElementById("uploadForm").addEventListener("submit",async d=>{d.preventDefault(),new FormData;const n=document.getElementById("textFile");if(n.files.length===0){alert("Bitte wählen Sie eine Datei aus.");return}const r=n.files[0];document.getElementById("loading").classList.remove("hidden"),document.getElementById("result").classList.add("hidden");try{const s=await r.text(),e=await m(s),t=Object.entries(e).sort(([,o],[,i])=>i!==o?i-o:o.localeCompare(i)).map(([o,i])=>`${o} [${i}];`).join(`
`);document.getElementById("indexContent").textContent=t,document.getElementById("result").classList.remove("hidden");const a=document.getElementById("downloadBtn");a.onclick=()=>{const o=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(o),c=document.createElement("a");c.href=i,c.download="index.txt",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i)}}catch(s){alert("Fehler: "+s.message)}finally{document.getElementById("loading").classList.add("hidden")}});
